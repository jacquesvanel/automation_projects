- hosts:
    - "{target}"
      #- host_mongo_primary
      #- host_mongo_secondary
      #- host_mongo_arbiter
  roles:
    - mongodb
  any_error_true: true
  vars:
    mongo_restart_config: true
    mongo_restart_seconds: 8
    mongo_thp: true
    mongo_numa: true
    mongo_replication:
      replSetName: sh1_pet 
    mongo_security:
      authorization: enabled
      keyFile: /etc/keyfile_mongo
      #mongo_admin_pass: something
      #mongo_adminuser_pass: something
    mongo_net:
      bindIp: 0.0.0.0
      port: 27017
    mongo_systemlog:
      destination: file
      logAppend: true
      path: /var/log/mongodb/pet/sh1-rs_a.log
    mongo_storage:
      dbPath: /data/pet/shard1/rs_a
      journal:
        enabled: true
    mongo_user:
      - database: burgers
        name: bob
        password: 12345
        state: present
        update_password: on_create    
  pre_tasks:
    # ensure this is done
    # - name: ensure hosts can connect to each other via hostnames
    #   template:
    #     src: hosts.j2
    #     dest: /etc/hosts
