---
- name: checking mongo config service
  systemd:
    name: mongodb-mms-automation-agent
  register: service_status

##### get status of service
- name: status of service
  debug:
    msg: "The status of {{ service_status.status.Names }} on {{ ansible_hostname }} is {{ service_status.status.ActiveState }}"

#fail task if service is in failed state
#- name:  fail module for services
#  fail:
#    msg: "The status of {{ service_status.status.Names }} on {{ ansible_hostname }} is {{ service_status.status.ActiveState }}"
#  when: service_status.status.ActiveState == 'failed'