---
- name: set facts for env var
  include_tasks: set_fact.yml
  tags:
    - always

- name: check status of mms agent
  include_tasks: agent_state.yml
  tags:
    - agent

- name: check status of server
  include_tasks: server_state.yml
  tags:
    - server_state

- name: check status of server
  include_tasks: health_check.yml
  tags:
    - health

- name: check disk state
  import_tasks: check_disk.yml
  tags:
    - disk

- name: check active processes if mms agent active
  include_tasks: processes.yml
  #when: service_status.status.ActiveState == 'active'
  tags:
    - processes

#- name: check standard processes if mms agent is inactive
#  include_tasks: standard_processes.yml
#  when: service_status.status.ActiveState == 'inactive'

#- name: get databases and collections
#  include_tasks: shell_script.yml
#  when: secondary.stdout == 'false'
#  tags:
#    - shell

- name: test
  import_tasks: test.yml
  tags:
    - test
    - never
