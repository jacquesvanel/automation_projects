---
# tasks file for mongo_config
    
- name: layout template for etc/mongo/{{ env }}/mongoS0.cfg on the config server
  template:
    src:  mongos0_config.conf.j2
    dest: "/etc/mongo/{{ env }}/mongoS0.cfg"
    owner: mongod
    group: opr-db-admin
    mode: '0644'
    force: yes

- name: layout template for etc/mongo/{{ env }}/mongoS1.cfg on the config server
  template:
    src:  mongos1_config.conf.j2
    dest: "/etc/mongo/{{ env }}/mongoS1.cfg"
    owner: mongod
    group: opr-db-admin
    mode: '0644'
    force: yes    

- name: layout template for etc/mongo/{{ env }}/mongoS2.cfg on the config server
  template:
    src:  mongos2_config.conf.j2
    dest: "/etc/mongo/{{ env }}/mongoS2.cfg"
    owner: mongod
    group: opr-db-admin
    mode: '0644'
    force: yes

    #- name: start mongos config 1
    #  shell: /usr/bin/mongos --quiet --config /etc/mongo/prod/mongoS1.cfg
  
    #- name: start mongos config 2
    # shell: /usr/bin/mongos --quiet --config /etc/mongo/prod/mongoS2.cfg

    #- name: start mongos config 3
    # shell: /usr/bin/mongos --quiet --config /etc/mongo/prod/mongoS3.cfg

  
