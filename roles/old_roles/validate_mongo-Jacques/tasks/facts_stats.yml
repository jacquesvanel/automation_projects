---
#CHECK THE ENVIRONMENT
- name: get env
  shell: cat /etc/serverinfo.conf | grep Environment | sed 's/Environment=//g' | tr [:upper:] [:lower:]
  register: envi
- name: show env variable
  debug:
    msg: "{{ envi.stdout }}"



                  #################        SBX         ##################      
#CHECK THE NAME OF THE CONFIF FILE, IN SBX ENVIRONMENT
- name: Checking config file name(SBX - rs_a.cfg)
  stat:
    path: /etc/mongo/sbx/rs_a.cfg
  when: envi.stdout == "sbx"
  register: config_file_rs_a_sbx

- name: checking config file name(SBX - shard1_rs_a.cfg)
  stat:
    path: /etc/mongo/sbx/shard1_rs_a.cfg
  when: envi.stdout == "sbx"
  register: config_file_shard1_rs_a_sbx

- name: Checking config file name(SBX - rs_b.cfg)
  stat:
    path: /etc/mongo/sbx/rs_b.cfg
  when: envi.stdout == "sbx"
  register: config_file_rs_b_sbx

- name: checking config file name(SBX - shard1_rs_b.cfg)
  stat:
    path: /etc/mongo/sbx/shard1_rs_b.cfg
  when: envi.stdout == "sbx"
  register: config_file_shard1_rs_b_sbx

- name: Checking config file name(SBX - rs_c.cfg)
  stat:
    path: /etc/mongo/sbx/rs_c.cfg
  when: envi.stdout == "sbx"
  register: config_file_rs_c_sbx

- name: checking config file name(SBX - shard1_rs_c.cfg)
  stat:
    path: /etc/mongo/sbx/shard1_rs_c.cfg
  when: envi.stdout == "sbx"
  register: config_file_shard1_rs_c_sbx



  
                  #####################       DSIT     ##################
#CHECK THE NAME OF THE CONFIF FILE, IN DSIT ENVIRONMENT
- name: Checking config file name(DSIT - rs_a.cfg)
  stat:
    path: /etc/mongo/rs_a.cfg
  ignore_errors: yes
  when:  envi.stdout == "dsit"
  register: config_file_rs_a_dsit
- name: checking config file name(DSIT - shard1_rs_a.cfg)
  stat:
    path: /etc/mongo/shard1_rs_a.cfg
  when: envi.stdout == "dsit"
  register: config_file_shard1_rs_a_dsit
- name: Checking config file name(DSIT - rs_b.cfg)
  stat:
    path: /etc/mongo/rs_b.cfg
  ignore_errors: yes
  when:  envi.stdout == "dsit"
  register: config_file_rs_b_dsit
- name: checking config file name(DSIT - shard1_rs_b.cfg)
  stat:
    path: /etc/mongo/shard1_rs_b.cfg
  when: envi.stdout == "dsit"
  register: config_file_shard1_rs_b_dsit
- name: Checking config file name(DSIT - rs_c.cfg)
  stat:
    path: /etc/mongo/rs_c.cfg
  ignore_errors: yes
  when:  envi.stdout == "dsit"
  register: config_file_rs_c_dsit
- name: checking config file name(DSIT - shard1_rs_c.cfg)
  stat:
    path: /etc/mongo/shard1_rs_c.cfg
  when: envi.stdout == "dsit"
  register: config_file_shard1_rs_c_dsit  





                #####################      DEV       ####################
#CHECK THE NAME OF THE CONFIF FILE, IN DEV ENVIRONMENT
- name: Checking config file name(DEV - rs_a.cfg)
  stat:
    path: /etc/mongo/rs_a.cfg
  ignore_errors: yes
  when:  envi.stdout == "dev"
  register: config_file_rs_a_dev
- name: checking config file name(DEV - shard1_rs_a.cfg)
  stat:
    path: /etc/mongo/shard1_rs_a.cfg
  when: envi.stdout == "dev"
  register: config_file_shard1_rs_a_dev
- name: Checking config file name(DEV - rs_b.cfg)
  stat:
    path: /etc/mongo/rs_b.cfg
  ignore_errors: yes
  when:  envi.stdout == "dev"
  register: config_file_rs_b_dev
- name: checking config file name(DEV - shard1_rs_b.cfg)
  stat:
    path: /etc/mongo/shard1_rs_b.cfg
  when: envi.stdout == "dev"
  register: config_file_shard1_rs_b_dev
- name: Checking config file name(DEV - rs_c.cfg)
  stat:
    path: /etc/mongo/rs_c.cfg
  ignore_errors: yes
  when:  envi.stdout == "dev"
  register: config_file_rs_c_dev
- name: checking config file name(DEV - shard1_rs_c.cfg)
  stat:
    path: /etc/mongo/shard1_rs_c.cfg
  when: envi.stdout == "dev"
  register: config_file_shard1_rs_c_dev




       
                   
     #####################      PET     ####################
#CHECK THE NAME OF THE CONFIF FILE, IN DEV ENVIRONMENT
- name: Checking config file name(PET - rs_a.cfg)
  stat:
    path: /etc/mongo/pte_defunct_managed_by_ops_now/rs_a.cfg
  ignore_errors: yes
  when: envi.stdout == "pet"
  register: config_file_rs_a_pet
- name: checking config file name(PET - shard1_rs_a.cfg)
  stat:
    path: /etc/mongo/pte_defunct_managed_by_ops_now/shard1_rs_a.cfg
  when: envi.stdout == "pet"
  register: config_file_shard1_rs_a_pet
- name: Checking config file name(PET - rs_b.cfg)
  stat:
    path: /etc/mongo/pte_defunct_managed_by_ops_now/rs_b.cfg
  ignore_errors: yes
  when: envi.stdout == "pet"
  register: config_file_rs_b_pet
- name: checking config file name(PET - shard1_rs_b.cfg)
  stat:
    path: /etc/mongo/pte_defunct_managed_by_ops_now/shard1_rs_b.cfg
  when: envi.stdout == "pet"
  register: config_file_shard1_rs_b_pet
- name: Checking config file name(PET - rs_c.cfg)
  stat:
    path: /etc/mongo/pte_defunct_managed_by_ops_now/rs_c.cfg
  ignore_errors: yes
  when: envi.stdout == "pet"
  register: config_file_rs_c_pet
- name: checking config file name(PET - shard1_rs_c.cfg)
  stat:
    path: /etc/mongo/pte_defunct_managed_by_ops_now/shard1_rs_c.cfg
  when: envi.stdout == "pet"
  register: config_file_shard1_rs_c_pet






         #####################      PROD     ####################
#CHECK THE NAME OF THE CONFIF FILE, IN PROD ENVIRONMENT
- name: Checking config file name(PROD - rs_a.cfg)
  stat:
    path: /etc/mongo/pte_defunct_managed_by_ops_now/rs_a.cfg
  ignore_errors: yes
  when: envi.stdout == "prod"
  register: config_file_rs_a_prod
- name: checking config file name(PROD - shard1_rs_a.cfg)
  stat:
    path: /etc/mongo/pte_defunct_managed_by_ops_now/shard1_rs_a.cfg
  when: envi.stdout == "prod"
  register: config_file_shard1_rs_a_prod
- name: Checking config file name(PROD - rs_b.cfg)
  stat:
    path: /etc/mongo/pte_defunct_managed_by_ops_now/rs_b.cfg
  ignore_errors: yes
  when: envi.stdout == "prod"
  register: config_file_rs_b_prod
- name: checking config file name(PROD - shard1_rs_b.cfg)
  stat:
    path: /etc/mongo/pte_defunct_managed_by_ops_now/shard1_rs_b.cfg
  when: envi.stdout == "prod"
  register: config_file_shard1_rs_b_prod
- name: Checking config file name(PROD - rs_c.cfg)
  stat:
    path: /etc/mongo/pte_defunct_managed_by_ops_now/rs_c.cfg
  ignore_errors: yes
  when: envi.stdout == "prod"
  register: config_file_rs_c_prod
- name: checking config file name(PROD - shard1_rs_c.cfg)
  stat:
    path: /etc/mongo/pte_defunct_managed_by_ops_now/shard1_rs_c.cfg
  when: envi.stdout == "prod"
  register: config_file_shard1_rs_c_prod




