---
- name: layout template for shell script
  template:
    src: mongodb_status_verify.sh.j2
    dest: "/etc/mongo/{{ env }}/scripts/post_mongodb_status_verify.sh"
    owner:
    group:
    mode:

- name: run shell script
  shell: /bin/bash /etc/mongo/{{ env }}/scripts/post_mongodb_status_verify.sh
  register: shell

- debug:
    msg: "{{ shell.stdout_lines }}"

- name: Generate diff
  command: diff  /tmp/MONGODB_VALIDATE/pre_MongoDB_Validate.txt  /tmp/MONGODB_VALIDATE/post_MongoDB_Validate.txt
  register: diff_result

- name: Show diff result
  debug:
    var: diff_result

    #- name: fail module
    #  fail:
    #    msg: files are different from eachother
    #  when: diff_result.changed

