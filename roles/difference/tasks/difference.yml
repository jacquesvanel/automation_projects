---
- name: get env
  shell: cat /etc/serverinfo.conf | grep Environment | sed 's/Environment=//g' | tr [:upper:] [:lower:]
  register: envi

- name: show env variable
  debug:
    msg: "{{ envi.stdout }}"
  register: enviro    

- name: check type of host
  shell:
    cmd: cat /etc/mongo/{{ enviro }}/rs_a.cfg | grep -i sharding
  register: replicatset
  ignore_errors: yes

- name: type of host
  debug: 
    msg: " {{ ansible_hostname }} is a REPLICATSET"
  when: "'sharding' in replicatset.stdout"    
