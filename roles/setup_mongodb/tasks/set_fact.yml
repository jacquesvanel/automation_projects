---
- name: get app name
  shell: cat /etc/serverinfo.conf | grep IrsApplicationName | sed 's/IrsApplicationName=//g' | tr [:upper:] [:lower:]
  args:
    warn: no
  register: app_name
  when: app_name is not defined

- name: get env
  shell: cat /etc/serverinfo.conf | grep Environment | sed 's/Environment=//g' | tr [:upper:] [:lower:]
  args:
    warn: no
  register: env1
  when: env1 is not defined

- set_fact:
    appname: "{{ app_name.stdout }}"
    env: "{{ env1.stdout }}"
  when: env1.changed or app_name.changed

- debug:
    msg: 
      - appname is "{{ appname }}"
      - env is "{{ env }}"

