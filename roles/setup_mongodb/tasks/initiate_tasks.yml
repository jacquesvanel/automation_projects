---
- include_tasks: initiate_shard1.yml
  when: (shard1a is defined) and (ansible_hostname == shard1a)

- include_tasks: initiate_shard2.yml
  when: (shard2a is defined) and (ansible_hostname == shard2a)

- include_tasks: initiate_shard3.yml
  when: (shard3a is defined) and (ansible_hostname == shard3a)

- include_tasks: initiate_config.yml
  when: (configsvr_rsa is defined) and (ansible_hostname == configsvr_rsa)

- include_tasks: start_mongos.yml
  when: (configsvr_rsa is defined) and (ansible_hostname == configsvr_rsa)

- include_tasks: start_mongos.yml
  when: (configsvr_rsb is defined) and (ansible_hostname == configsvr_rsb)

- include_tasks: start_mongos.yml
  when: (configsvr_rsc is defined) and (ansible_hostname == configsvr_rsc)

- include_tasks: add_shards_to_cluster.yml
  when: (configsvr_rsa is defined) and (ansible_hostname == configsvr_rsa)

- include_tasks: user_setup.yml
  when: (configsvr_rsa is defined) and (ansible_hostname == configsvr_rsa)

- include_tasks: user_setup.yml
  when: (shard1a is defined) and (ansible_hostname == shard1a)

- include_tasks: user_setup.yml
  when: (shard2a is defined) and (ansible_hostname == shard2a)

- include_tasks: user_setup.yml
  when: (shard3a is defined) and (ansible_hostname == shard3a)
