---
- block:
  - name: start and enable mongos0.service
    systemd:
      name: mongos0
      state: restarted
      enabled: yes
      daemon_reload: yes

  - name: start and enable mongos1.service
    systemd:
      name: mongos1
      state: restarted
      enabled: yes
      daemon_reload: yes

  - name: start and enable mongos2.service
    systemd:
      name: mongos2
      state: restarted
      enabled: yes
      daemon_reload: yes
  when: 'start_mongos'
  loop:
    - (configsvr_rsa is defined) and (ansible_hostname == configsvr_rsa)
    - (configsvr_rsb is defined) and (ansible_hostname == configsvr_rsb)
    - (configsvr_rsc is defined) and (ansible_hostname == configsvr_rsc)
  loop_control:
    loop_var: start_mongos
