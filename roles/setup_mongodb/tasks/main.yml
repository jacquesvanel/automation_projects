---
- name: uninstall services
  include_tasks: uninstall.yml
  tags:
    - never
    - uninstall
    - reinstall

- name: install mongodb base
  import_tasks: install_base.yml
  tags:
    - install
    - reinstall
    - base

- name: install mongodb base
  import_tasks: install_dbtools.yml
  tags:
    - install
    - reinstall
    - dbtools

- name: make directories
  import_tasks: make_file.yml  
  tags:
    - install
    - reinstall
    - make_file

- name: add certs
  import_tasks: add_certs.yml
  tags:
    - install
    - reinstall
    - add_certs
 
- name: add logrotate file
  import_tasks: logrotate.yml
  tags:
    - install
    - reinstall
    - logrotate

- name: add hugepages fix
  import_tasks: hugepages.yml
  tags:
    - install
    - reinstall
    - hugepages

- name: add mongo service file
  import_tasks: mongo_service.yml
  tags:
    - install
    - reinstall
    - mongo
      
#starts install of config files
- name: deploy configsvr template
  import_tasks: configsvr_template.yml
  tags:
    - install
    - reinstall
    - configsvr

- name: deploy shard1_template
  import_tasks: shard1_template.yml
  tags: 
    - install
    - reinstall
    - shard1

- name: deploy shard2_template
  import_tasks: shard2_template.yml
  tags: 
    - install
    - reinstall
    - shard2

- name: deploy shard3 template
  import_tasks: shard3_template.yml
  tags: 
    - install
    - reinstall
    - shard3

- name: deploy mongos_template
  import_tasks: mongos_template.yml
  tags: 
    - install
    - reinstall
    - mongos

- name: setup users
  import_tasks: user_setup.yml
  tags: 
    - install
    - setup_users
    - reinstall

- name: create role
  import_tasks: createrole.yml
  tags: 
    - create_role
    - reinstall
    
- name: change ldap interval
  import_tasks: ldapintervalchange.yml
  tags: 
    - ldap_interval_change
    - reinstall

- name: initiate db
  import_tasks: initiate_tasks.yml
  tags:
    - initiate_db
    - start_mongos
    - add_shards
    - reinstall


