---
# tasks file for mongodb-mms
- name: install base mongodb
  import_tasks: install_base.yml
  tags:
    - install
    - reinstall
    - base
    - ops

- name: install mongodb tools
  import_tasks: install_dbtools.yml
  tags:
    - install
    - reinstall
    - dbtools
    - ops

- name: install mongomms
  import_tasks: install_mongomms.yml
  tags:
    - ops
    - install
    - base_ops

- name: make directories
  import_tasks: make_file.yml
  tags:
    - install
    - reinstall
    - make_file
    - ops

- name: add certs
  import_tasks: add_certs.yml
  tags:
    - install
    - reinstall
    - add_certs
    - ops

- name: add logrotate file
  import_tasks: logrotate.yml
  tags:
    - install
    - reinstall
    - logrotate
    - ops

- name: add hugepages fix
  import_tasks: hugepages.yml
  tags:
    - install
    - reinstall
    - hugepages
    - ops

# - name: untar mongodb-mms
      
- name: install and configure tuned
  import_tasks: install_tuned.yml
  tags:
    - tuned

- name: setup AppDB
  import_tasks: setup_appdb.yml
  tags:
    - appdb

- name: setup mongod.conf
  import_tasks: create_mongod.conf.yml
  tags:
    - mongod

#- name: initiate repset

#- name: add users
