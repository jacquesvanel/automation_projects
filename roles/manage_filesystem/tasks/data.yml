---
- name: Extend Opt logical volume
  command: lvextend -L +{{ data_size }} /dev/mapper/{{ vg_name }}-{{ lv_name }}
  register: lv_extend
  ignore_errors: yes

- name: Grow filesystem
  command: xfs_growfs /dev/mapper/{{ vg_name }}-{{ lv_name }}
  when: lv_extend.changed
  register: fs_grow
  ignore_errors: yes
  
  #- name: Mount filesystems
  #  mount:
  #    path: "/mnt/{{ item.filesystem }}"
  #    src: "{{ item.device }}{{ item.partition }}"
  #    fstype: "{{ item.filesystem }}"
  #    state: mounted
  #  with_items: "{{ partition_data }}"
