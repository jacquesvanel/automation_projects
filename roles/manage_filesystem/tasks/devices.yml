---
- name: initialize empty list for devices
  set_fact:
    storage_devices: []
    no_log: false 

- name: get SATA and NVMe devices
  set_fact:
    storage_devices: "{{ storage_devices + [item.key] + [item.value] }}"
  no_log: false 
  with_dict: "{{ ansible_mounts }}"
  #  when: "item.value.host.startswith('SATA controller:') or
  #         item.value.host.startswith('Non-Volatile memory controller:')"

- name: show all values for selected devices
  debug: 
    msg: "{{ item.key.device }}"
  loop: "{{ storage_devices }}"

- name: show devices names
  debug: 
    msg: "{{ storage_devices }}"

- name: show first SATA or NVMe device in the list
  debug: 
    var: storage_devices[device]
 
- name:
  debug:
    msg: "device is {{item.device}}"
  loop: "{{ ansible_mounts }}"
