---
#- debug:
#    msg: "{{ item.value.size_g }}"
#  with_dict: "{{ ansible_lvm.lvs }}"
#  register: opt_size
#  when: item.key == "opt"
  
#- debug:
#    msg: "{{ item.key }}"
#  with_dict: "{{ ansible_devices }}"
#  register: device
#  when: item.key.startswith('nvme') and item.value.partitions == {}

#- name: get vgs
#  debug:
#    msg: "{{ item.key }}"
#  with_dict: "{{ ansible_lvm.vgs }}"
#  register: vg_name

- debug:
    msg: "{{ ansible_lvm.vgs }}"

- set_fact: 
    vg_name: "{{ item }}"
    #    cacheable: yes
  with_items: "{{ ansible_lvm.vgs.keys() }}"

- debug:
    msg: 
     - "{{ vg_name }}"
  #with_items: "{{ device.results }}"
