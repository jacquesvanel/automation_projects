---
#- debug:
#    msg: "{{ item.value.size_g }}"
#  with_dict: "{{ ansible_lvm.lvs }}"
#  register: opt_size
#  when: item.key == "opt"
  
- debug:
    msg: "{{ item.key }}"
  with_dict: "{{ ansible_devices }}"
  register: device
  when: item.key.startswith('nvme') and item.value.partitions == {}

- debug:
    var: "{{ device }}"

- name: get vgs
  debug:
    msg: "{{ item.key }}"
  with_dict: "{{ ansible_lvm.vgs }}"
  register: vg_name

- debug:
    var: "{{ vg_name }}"

    #- set_fact: 
    #    vg_name: "{{ item }}"
    #  with_items: "{{ ansible_lvm.vgs.keys() }}"

#- debug:
#    msg: 
#     - "{{ ansible_lvm.vgs.keys() }}"
  #with_items: "{{ device.results }}"
  #

  #- name: make backup
  #  copy:
  #    src: "{{ item }}"
  #    dest: "/etc/mongo/"
  #    remote_src: yes
  #  with_items: "{{ service.files | map(attribute='path')| list }}"
