---
#- name:
#  command: lvdisplay /dev/VolGroup/opt | grep "LV Size" | awk 'END {print$3}'| sed 's/\.[0-9][0-9]//g'
#  register: opt_size

- set_fact:
    opt_size: "{{ item.value.size_g }}"
  with_dict: "{{ ansible_lvm.lvs }}"
  when: item.key == "opt"

- debug:
    var: opt_size

    #- set_fact:
    #    vgs_name: "{{ item.key }}"
    #  with_dict: "{{ ansible_lvm.vgs }}"

    #- debug:
    #    var: vgs_name

- name: Extend Opt logical volume
  lvol:
    vg: "{{ vgs_name }}"
    lv: opt 
    size: 9G
    resizefs: true 
  when: opt_size|int <= 9.00
  ignore_errors: yes

